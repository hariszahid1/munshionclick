<div class="hidden" id="type_list">
  <div class="row">
    <div class="col-lg-12 col-sm-12">
      <div class="main-content-header">
            <h1 class="ml-2">User Types</h1>
            <ol class="breadcrumb">
              <li class="breadcrumb-item">
                <a href="<%= root_path %>">Dashboard</a>
              </li>
              <li class="breadcrumb-item active">
                <a href="<%= user_types_path %>">User Types</a>
              </li>
            </ol>
          </div>
        <div class="float-right">
          <div class="dropdown ml-auto mr-4">
           <span class="btn btn-info" title= "About This page">Help</span>
            <div class="dropdown-content">
              <% if @help.present? %>
              <% @help&.help_links.each do |link| %>
              <a type="button" class="" target="_blank" href="<%= link[1] %>" >Help in <%= link[0] %></a>
               <% end %>
              <% end %>
            </div>
          </div>
        </div>

        <ul class="nav nav-tabs" role="tablist">
          <li class="nav-item">
            <a class="nav-link tab-label active" data-toggle="tab" href="#search" role="tab">Search</a>
          </li>
          <li class="nav-item">
            <a class="nav-link tab-label" data-toggle="tab" href="#create" role="tab">Create</a>
          </li>
          <li class="nav-item">
            <a class="nav-link tab-label" data-toggle="tab" href="#pdf" role="tab">Download pdf</a>
          </li>
          <li class="nav-item">
            <a class="nav-link tab-label" data-toggle="tab" href="#csv" role="tab">Download Csv</a>
          </li>
          <li class="nav-item">
            <a class="nav-link tab-label" data-toggle="tab" href="#emails" role="tab">Send Email</a>
          </li>
          <li class="nav-item">
           <a class="nav-link tab-label" data-toggle="tab" href="#import-export" role="tab">Import/Export</a>
          </li>
      </ul>

      <%= search_form_for @q, url: user_types_path, class: "admin-controls", method: "get" do |f| %>

        <div class="tab-content mb-5">
          <div class="tab-pane active" id="search" role="tabpanel">
           <p>
              <div class="row">
                <div class="col-lg-12 col-sm-12">
                  <%= search_form_for @q, url: user_types_path, class: "admin-controls", method: "get" do |f| %>
                    <div class="col-lg-3 form-group float-left">
                      <%= f.select :title_or_comment_cont, options_from_collection_for_select(@user_types, "title", ->(st){"#{st.title} \u{27F6} #{st.comment} "}),{:include_blank => "Select Title"},:class=>"form-control chosen-select" %>
                   </div>
                    <div class="col-lg-2 form-group float-left">
                      <button class="form-control btn btn-primary" name="search_submit" type="submit" value="Search" style="width:100px"><i class="fa fa-search"></i></button>
                    </div>
                  <% end %>
                </div>
              </div>
            </p>
          </div>

          <div class="tab-pane" id="create" role="tabpanel">
              <p>
                <% if can?(:add, :all) %>
                  <div id="new_user_type">
                    <%= link_to new_user_type_path, remote: true, class: "btn btn-success ml-3" do %>
                      <i class="fa fa-plus" aria-hidden="true"></i>
                      New Type
                    <% end %>
                  </div>
                  <% end %>
              </p>
          </div>
          <div class="tab-pane" id="pdf" role="tabpanel">
            <p>
              <div class="col-lg-2 d-flex">
              <button class="btn btn-danger" title= "download user types pdf" name="pdf" type="submit" value="pdf" formtarget="_blank">User Types &nbsp;<i class="fa fa-file-pdf"></i></button>
              </div>
            </p>
          </div>
          <div class="tab-pane" id="csv" role="tabpanel">
            <p>
              <div class="col-lg-2 d-flex">
              <button class="btn btn-success" title= "download user types csv" name="csv" type="submit" value="csv">User Types &nbsp;<i class="fa fa-file-excel"></i></button>
              </div>
            </p>
          </div>
    <div class="tab-pane" id="emails" role="tabpanel">
      <p>
        <div class="col-lg-2 d-flex">
        <button class="form-control btn btn-info" type="button" data-toggle="modal" data-target="#exampleModalCenter" style="width:100px"><i class="fa fa-envelope"></i>&nbsp;Mail</button>
        </div>
     </p>
      <!-- Modal -->
      <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLongTitle">Enter your email to recieve files.</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
            </div>
            <div class="modal-body">
              <% @pos_setting = PosSetting.first %>
              <label>Email:</label>
              <%= text_field_tag 'email_value',{}, value: current_user.email, class: 'form-control', type: 'email'%>
              <br />
              <label>Subject:</label>
              <%= text_field_tag 'subject', "#{@pos_setting.display_name} - User Types Detail report from MunshiOnClick", class: 'form-control'%>
              <br />
              <label>Body:</label><br />
              <%= text_area_tag 'body', nil, class: 'form-control'%>
              <br />

              <label>Please select one of them.</label>
              <div>
                <label style="cursor: pointer"><%= radio_button_tag :email_choice, 'CSV', required: 'required' %> CSV</label><br />
                <label style="cursor: pointer"><%= radio_button_tag :email_choice, 'PDF', required: 'required' %> PDF</label><br />
                <label style="cursor: pointer"><%= radio_button_tag :email_choice, 'Both', required: 'required' %> Both(CSV + PDF)</label><br />
              </div>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
              <button name="email" type="submit" value="email" class="btn btn-primary">Send</button>
            </div>
            </div>
        </div>
      </div>
    </div>
    <div class="tab-pane" id="import-export" role="tabpanel">
      <p>
        <div class="d-flex">
        <button class="btn btn-success ml-2" name="export_data" type="submit" value="export_data">Export Data</button>
        <button class="btn btn-primary ml-2" type="button" data-toggle="modal" data-target="#importFile">Import Data</button>
        </div>
      </p>
    </div>
    </div>
    <% end %>
  
  <%= render 'map_columns/map_column_partials' %>

  <table data-toggle="table" data-search="true" id="user_type_table">
    <thead>
      <tr>
        <th><%= sort_link(@q, :id, 'ID') %></th>
        <th><%= sort_link(@q, :title, 'Title') %></th>
        <th><%= sort_link(@q, :code, 'Code') %></th>
        <th><%= sort_link(@q, :discount_by_percentage, 'Discount by percentage') %></th>
        <th><%= sort_link(@q, :discount_by_amount, 'Discount by amount') %></th>
        <th><%= sort_link(@q, :comment, 'Comment') %></th>
        <th>Action</th>
      </tr>
    </thead>

    <tbody>
    <%= render partial: 'user_type', collection: @user_types %>
    </tbody>
  </table>
</div>

  <div class="clearfix"></div>
    <div class="row d-flex ml-1">
      <div class="col-lg-12 col-sm-4">
        <%= page_entries_info @user_types %>
      </div>
      <div class="col-lg-12 col-sm-8 pagination-left">
        <%= paginate @user_types %>
      </div>
    </div>
<div class="show-data"></div>
<script>
  $(document).ready(function() {
    if ($(".bootstrap-table").length == 0){
      $("table").bootstrapTable();
    }
    $("#type_list").removeClass('hidden');
    FontAwesome.dom.i2svg();
  });
</script>
